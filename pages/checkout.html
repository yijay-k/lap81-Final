<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout â€” NOIR STREET</title>
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/animations.css">
  <link rel="stylesheet" href="../css/layout.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/pages/shop.css">
  <link rel="stylesheet" href="../css/pages/cart.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav" id="nav">
    <a href="../index.html" class="logo">
      <span class="logo-dot"></span>
      NOIR STREET
    </a>
    <ul class="nav-links">
      <li><a href="../index.html">Home</a></li>
      <li><a href="shop.html">Shop</a></li>
      <li><a href="mens.html">Mens</a></li>
      <li><a href="womens.html">Womens</a></li>
      <li><a href="sale.html">Sale</a></li>
      <li><a href="team.html">Team</a></li>
    </ul>
    <div class="nav-actions">
      <a href="profile.html" class="nav-icon-btn">
        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="10" cy="6" r="4"/><path d="M2 20v-2a6 6 0 0 1 6-6h4a6 6 0 0 1 6 6v2"/>
        </svg>
      </a>
    </div>
  </nav>

  <!-- Checkout Page -->
  <main class="checkout-page">
    <div class="checkout-container">
      <div class="checkout-form-wrapper">
        <h1 class="page-title" style="text-align: left; padding: 0; margin-bottom: 40px;">Checkout</h1>
        
        <form id="checkoutForm">
          <div class="checkout-section">
            <h3 class="checkout-section-title">Contact Information</h3>
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
              <label class="form-label">Phone</label>
              <input type="tel" class="form-input" placeholder="+1 (555) 000-0000" required>
            </div>
          </div>
          
          <div class="checkout-section">
            <h3 class="checkout-section-title">Shipping Address</h3>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">First Name</label>
                <input type="text" class="form-input" placeholder="John" required>
              </div>
              <div class="form-group">
                <label class="form-label">Last Name</label>
                <input type="text" class="form-input" placeholder="Doe" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Address</label>
              <input type="text" class="form-input" placeholder="123 Street Name" required>
            </div>
            <div class="form-group">
              <label class="form-label">Apartment, suite, etc. (optional)</label>
              <input type="text" class="form-input" placeholder="Apt 4B">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">City</label>
                <input type="text" class="form-input" placeholder="New York" required>
              </div>
              <div class="form-group">
                <label class="form-label">State</label>
                <select class="form-select" required>
                  <option value="">Select state</option>
                  <option value="NY">New York</option>
                  <option value="CA">California</option>
                  <option value="TX">Texas</option>
                  <option value="FL">Florida</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">ZIP Code</label>
                <input type="text" class="form-input" placeholder="10001" required>
              </div>
            </div>
          </div>
          
          <div class="checkout-section">
            <h3 class="checkout-section-title">Payment</h3>
            <div class="form-group">
              <label class="form-label">Card Number</label>
              <input type="text" class="form-input" placeholder="1234 5678 9012 3456" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Expiry Date</label>
                <input type="text" class="form-input" placeholder="MM/YY" required>
              </div>
              <div class="form-group">
                <label class="form-label">CVV</label>
                <input type="text" class="form-input" placeholder="123" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Name on Card</label>
              <input type="text" class="form-input" placeholder="John Doe" required>
            </div>
          </div>
          
          <button type="submit" class="btn btn-primary btn-full">Complete Order</button>
        </form>
      </div>
      
      <div class="checkout-summary">
        <div class="summary-box">
          <h3 class="summary-title">Order Summary</h3>
          <div class="summary-items" id="summaryItems">
            <!-- Items injected by JS -->
          </div>
          <div class="summary-row">
            <span>Subtotal</span>
            <span id="summarySubtotal">$0</span>
          </div>
          <div class="summary-row">
            <span>Shipping</span>
            <span id="summaryShipping">$0</span>
          </div>
          <div class="summary-row">
            <span>Tax</span>
            <span id="summaryTax">$0</span>
          </div>
          <div class="summary-row total">
            <span>Total</span>
            <span id="summaryTotal">$0</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-bottom">
        <p class="footer-copy">&copy; 2025 NOIR STREET. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="../js/data.js"></script>
  <script src="../js/controllers/cart-controller.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cart = JSON.parse(localStorage.getItem('noirCart')) || [];
      const summaryItems = document.getElementById('summaryItems');
      
      if (cart.length === 0) {
        window.location.href = 'shop.html';
        return;
      }
      
      // Render items
      summaryItems.innerHTML = cart.map(item => `
        <div class="summary-item">
          <img src="${item.image}" alt="${item.name}" class="summary-item-img">
          <div class="summary-item-info">
            <div class="summary-item-name">${item.name}</div>
            <div class="summary-item-variant">Size: ${item.size} | Qty: ${item.qty}</div>
          </div>
          <div class="summary-item-price">$${item.price * item.qty}</div>
        </div>
      `).join('');
      
      // Calculate totals
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      const shipping = subtotal >= 150 ? 0 : 15;
      const tax = Math.round(subtotal * 0.08);
      const total = subtotal + shipping + tax;
      
      document.getElementById('summarySubtotal').textContent = `$${subtotal}`;
      document.getElementById('summaryShipping').textContent = shipping === 0 ? 'Free' : `$${shipping}`;
      document.getElementById('summaryTax').textContent = `$${tax}`;
      document.getElementById('summaryTotal').textContent = `$${total}`;
      
      // Form submit
      document.getElementById('checkoutForm').addEventListener('submit', (e) => {
        e.preventDefault();
        localStorage.setItem('noirLastOrder', JSON.stringify({ 
          id: 'NS' + Math.random().toString(36).substr(2, 9).toUpperCase(),
          total: total,
          date: new Date().toLocaleDateString()
        }));
        localStorage.removeItem('noirCart');
        window.location.href = 'confirmation.html';
      });
    });
  </script>
</body>
</html>
